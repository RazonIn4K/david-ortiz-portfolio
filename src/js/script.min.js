class ThemeManager{constructor(){this.themeToggle=document.querySelector(".theme-toggle"),this.themeIcon=document.querySelector(".theme-icon"),this.storageKey="david-theme-preference",this.mediaQuery="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: light)"):null,this.currentTheme=this.resolveInitialTheme(),this.applyTheme(this.currentTheme),this.bindEvents()}resolveInitialTheme(){const e=this.getStoredTheme();return"light"===e||"dark"===e?e:this.mediaQuery&&this.mediaQuery.matches?"light":"dark"}bindEvents(){if(this.themeToggle&&this.themeIcon&&this.themeToggle.addEventListener("click",()=>this.toggleTheme()),this.mediaQuery){const handler=e=>{this.getStoredTheme()||this.applyTheme(e.matches?"light":"dark")};"function"==typeof this.mediaQuery.addEventListener?this.mediaQuery.addEventListener("change",handler):"function"==typeof this.mediaQuery.addListener&&this.mediaQuery.addListener(handler)}}getStoredTheme(){try{return localStorage.getItem(this.storageKey)}catch(e){return null}}setStoredTheme(e){try{localStorage.setItem(this.storageKey,e)}catch(e){}}applyTheme(e){document.documentElement.setAttribute("data-theme",e),this.currentTheme=e,this.themeIcon&&(this.themeIcon.textContent="dark"===e?"‚òÄÔ∏è":"üåô"),this.themeToggle&&this.themeToggle.setAttribute("aria-label",`Switch to ${"dark"===e?"light":"dark"} theme`),this.setStoredTheme(e)}toggleTheme(){const e="dark"===this.currentTheme?"light":"dark";this.applyTheme(e),"undefined"!=typeof gtag&&gtag("event","theme_toggle",{event_category:"engagement",event_label:e})}}class SmoothNavigation{constructor(){this.navLinks=document.querySelectorAll(".nav-link"),this.init()}init(){this.navLinks.forEach(e=>{e.addEventListener("click",e=>this.handleNavClick(e))})}handleNavClick(e){e.preventDefault();const t=e.target.getAttribute("href"),n=document.querySelector(t);if(n){const e=document.querySelector(".header").offsetHeight,i=n.offsetTop-e;window.scrollTo({top:i,behavior:"smooth"}),"undefined"!=typeof gtag&&gtag("event","navigation_click",{event_category:"engagement",event_label:t})}}}class FormValidator{constructor(e){this.form=document.querySelector(e),this.errors={},this.form&&this.init()}init(){this.form.addEventListener("submit",e=>this.handleSubmit(e));this.form.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>this.clearFieldError(e))})}validateField(e){const t=e.value.trim(),n=e.name;let i=!0,r="";if(this.clearFieldError(e),e.hasAttribute("required")&&!t)r=`${this.getFieldLabel(e)} is required.`,i=!1;else if("email"===e.type&&t){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(r="Please enter a valid email address.",i=!1)}return i?delete this.errors[n]:(this.showFieldError(e,r),this.errors[n]=r),i}validateForm(){const e=this.form.querySelectorAll("input[required], textarea[required]");let t=!0;return e.forEach(e=>{this.validateField(e)||(t=!1)}),t}handleSubmit(e){if(this.validateForm())"undefined"!=typeof gtag&&gtag("event","form_submit",{event_category:"contact",event_label:"contact_form"});else{e.preventDefault();const t=this.form.querySelector(".form-input:invalid, .form-textarea:invalid");t&&t.focus(),"undefined"!=typeof gtag&&gtag("event","form_validation_error",{event_category:"form",event_label:"contact_form",value:Object.keys(this.errors).length})}}showFieldError(e,t){const n=document.getElementById(`${e.name}-error`);n&&(n.textContent=t,n.style.display="block"),e.setAttribute("aria-invalid","true"),e.style.borderColor="var(--error-color)"}clearFieldError(e){const t=document.getElementById(`${e.name}-error`);t&&(t.textContent="",t.style.display="none"),e.removeAttribute("aria-invalid"),e.style.borderColor=""}getFieldLabel(e){const t=document.querySelector(`label[for="${e.id}"]`);return t?t.textContent.replace("*","").trim():e.name}}class AnimationController{constructor(){this.observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},this.init()}init(){if("IntersectionObserver"in window){this.observer=new IntersectionObserver(e=>this.handleIntersection(e),this.observerOptions);document.querySelectorAll("section").forEach(e=>this.observer.observe(e)),this.setupProjectCardAnimations()}}setupProjectCardAnimations(){const e=document.querySelectorAll(".project-card"),t=document.querySelectorAll(".skill-card");e.forEach((e,t)=>{e.classList.add("fade-in-on-scroll"),e.style.transitionDelay=80*t+"ms";const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("animate")},80*t),n.unobserve(e.target))})},{threshold:.2});n.observe(e)}),t.forEach((e,t)=>{e.classList.add("fade-in-on-scroll"),e.style.transitionDelay=40*t+"ms";const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("animate")},40*t),n.unobserve(e.target))})},{threshold:.1});n.observe(e)})}handleIntersection(e){e.forEach(e=>{if(e.isIntersecting&&(e.target.style.animation="fade-in-up 0.6s ease-out forwards","undefined"!=typeof gtag)){const t=e.target.id||"unknown";gtag("event","section_view",{event_category:"engagement",event_label:t})}})}}class EmbedManager{constructor(){this.iframes=document.querySelectorAll(".project-embed iframe"),this.init()}init(){this.iframes.forEach(e=>{e.addEventListener("error",()=>this.handleEmbedError(e)),e.addEventListener("load",()=>this.handleEmbedLoad(e)),setTimeout(()=>{e.complete||this.handleEmbedError(e)},1e4)})}handleEmbedError(e){const t=e.closest(".project-embed").querySelector(".embed-fallback");t&&(e.style.display="none",t.style.display="block",t.textContent="View Presentation (Embed unavailable)","undefined"!=typeof gtag&&gtag("event","embed_error",{event_category:"error",event_label:e.src}))}handleEmbedLoad(e){const t=e.closest(".project-embed").querySelector(".embed-fallback");t&&(t.style.display="none")}}class PerformanceMonitor{constructor(){this.init()}init(){window,window.addEventListener("load",()=>{this.trackLoadTime()}),this.monitorMemoryUsage()}trackLoadTime(){if("performance"in window){const e=performance.timing.loadEventEnd-performance.timing.navigationStart;"undefined"!=typeof gtag&&gtag("event","page_load_time",{event_category:"performance",value:Math.round(e)})}}monitorMemoryUsage(){if("memory"in performance){setInterval(()=>{const e=performance.memory,t=Math.round(e.usedJSHeapSize/e.jsHeapSizeLimit*100);t>80&&(console.warn("High memory usage detected:",t+"%"),"undefined"!=typeof gtag&&gtag("event","high_memory_usage",{event_category:"performance",value:t}))},3e4)}}}class AccessibilityManager{constructor(){this.init()}init(){this.setupKeyboardNavigation(),this.setupFocusManagement(),this.setupScreenReaderSupport(),this.setupAccessibleTooltips()}setupKeyboardNavigation(){document.querySelectorAll(".skill-card, .project-card").forEach(e=>{e.setAttribute("tabindex","0"),e.addEventListener("keydown",t=>{if("Enter"===t.key||" "===t.key){t.preventDefault();const n=e.querySelector("a");n&&n.click()}})})}setupFocusManagement(){document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")})}setupScreenReaderSupport(){const e=document.querySelector(".theme-toggle");e&&e.addEventListener("click",()=>{const e=document.documentElement.getAttribute("data-theme");this.announceToScreenReader(`Switched to ${e} theme`)})}announceToScreenReader(e){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("sr-only"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}setupAccessibleTooltips(){document.querySelectorAll(".skill-card[data-tooltip]").forEach((e,t)=>{const n=`tooltip-${t}`,i=e.getAttribute("data-tooltip");e.setAttribute("aria-describedby",n);const r=document.createElement("span");r.id=n,r.classList.add("sr-only"),r.textContent=i,e.appendChild(r),e.addEventListener("focus",()=>{this.announceToScreenReader(`${e.querySelector(".skill-name").textContent}: ${i}`)})})}}class ErrorHandler{constructor(){this.init()}init(){window.addEventListener("error",e=>this.handleError(e)),window.addEventListener("unhandledrejection",e=>this.handlePromiseRejection(e)),window.addEventListener("unhandledrejection",e=>this.handleUnhandledRejection(e)),this.setupGlobalErrorBoundary()}handleError(e){console.error("JavaScript Error:",e.error),"HandledError"!==e.error?.name&&("undefined"!=typeof gtag&&gtag("event","javascript_error",{event_category:"error",event_label:e.error?.name||"unknown_error",event_action:e.filename+":"+e.lineno+":"+e.colno}),this.showErrorNotification(e.error?.message||"An unexpected error occurred"))}handlePromiseRejection(e){console.error("Unhandled Promise Rejection:",e.reason),"undefined"!=typeof gtag&&gtag("event","promise_rejection",{event_category:"error",event_label:"unhandled_promise_rejection"}),this.showErrorNotification("A background process failed")}handleUnhandledRejection(e){console.error("Unhandled Rejection:",e.reason),"undefined"!=typeof gtag&&gtag("event","unhandled_rejection",{event_category:"error",event_label:"unhandled_rejection"})}showErrorNotification(e){const t=document.createElement("div");t.className="error-notification",t.innerHTML=`\n      <div class="error-content">\n        <span class="error-icon">‚ö†Ô∏è</span>\n        <span class="error-message">${this.escapeHtml(e)}</span>\n        <button class="error-dismiss" aria-label="Dismiss">√ó</button>\n      </div>\n    `,t.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: var(--error-color);\n      color: white;\n      padding: 12px 16px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      z-index: 10000;\n      font-size: 14px;\n      max-width: 300px;\n    ",document.body.appendChild(t);t.querySelector(".error-dismiss").addEventListener("click",()=>{t.remove()}),setTimeout(()=>{t.parentNode&&t.remove()},1e4)}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}setupGlobalErrorBoundary(){const e=window.fetch;window.fetch=function(...t){return e.apply(this,t).catch(e=>{throw console.error("Fetch error:",e),new Error("NetworkError")})},this.monitorPerformance()}monitorPerformance(){let e=performance.now(),t=0;const checkPerformance=()=>{const n=performance.now(),i=n-e;e=n,i>50?(t++,t>10&&(console.warn("High CPU usage detected - performance may be degraded"),t=0)):t=0,requestAnimationFrame(checkPerformance)};"requestAnimationFrame"in window&&requestAnimationFrame(checkPerformance)}}class AdvancedPerformanceMonitor{constructor(){this.fps=60,this.frameTime=0,this.lastTime=performance.now(),this.frameCount=0,this.isLowPerformance=!1,this.performanceThreshold=30}update(){this.frameCount++;const e=performance.now();this.frameTime=e-this.lastTime,this.lastTime=e,this.frameCount%60==0&&(this.fps=Math.round(1e3/this.frameTime),this.isLowPerformance=this.fps<this.performanceThreshold)}shouldReduceQuality(){return this.isLowPerformance}getAdaptiveDelay(){return this.isLowPerformance?5e3:3e3}getAdaptiveIconCount(){return this.isLowPerformance?.05:.03}}class StarfieldManager{constructor(){this.icons=["‚öõÔ∏è","üíª","üêç","üöÄ","‚òÅÔ∏è","‚öôÔ∏è","üîß","üìä","üóÑÔ∏è","üîç","‚ö°","üîí","üéØ","üìà","üî¨","üé®","üì±","üíæ","üîó","üìã"],this.starfieldContainer=null,this.totalIcons=120,this.isEnabled=!window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.animationFrame=null,this.twinkleInterval=null,this.performanceMonitor=new AdvancedPerformanceMonitor,this.iconPool=[],this.lastFrameTime=0,this.frameCount=0,this.adaptiveQuality=!0,this.isEnabled&&this.init()}init(){this.createStarfield(),this.generateRandomOpacities(),this.addTwinklingEffect(),this.addMouseInteraction(),this.addScrollBasedAnimation()}createStarfield(){this.starfieldContainer=document.createElement("div"),this.starfieldContainer.className="starfield-background",this.starfieldContainer.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: -1;\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));\n      gap: 15px;\n      padding: 15px;\n      overflow: hidden;\n    ";const e=document.body,t=e.firstChild;e.insertBefore(this.starfieldContainer,t);for(let e=0;e<this.totalIcons;e++)this.createStarIcon(e)}createStarIcon(e){const t=document.createElement("div");t.className="starfield-icon-wrapper",t.style.cssText=`\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: var(--transition-base);\n      font-size: 24px;\n      opacity: ${.6*Math.random()+.2};\n    `;const n=document.createElement("span"),i=this.icons[Math.floor(Math.random()*this.icons.length)];n.textContent=i,n.className="starfield-icon",n.style.cssText="\n      transition: all 2s cubic-bezier(0.4, 0, 0.2, 1);\n      filter: grayscale(70%) brightness(0.8);\n    ",t.addEventListener("mouseenter",()=>{window.matchMedia("(prefers-reduced-motion: reduce)").matches||(n.style.transform="scale(1.1)",n.style.filter="grayscale(30%) brightness(1.1)")}),t.addEventListener("mouseleave",()=>{n.style.transform="scale(1)",n.style.filter="grayscale(70%) brightness(0.8)"}),t.appendChild(n),this.starfieldContainer.appendChild(t)}generateRandomOpacities(){this.starfieldContainer.querySelectorAll(".starfield-icon")}addTwinklingEffect(){const e=this.starfieldContainer.querySelectorAll(".starfield-icon");this.iconPool=Array.from(e);const performanceTwinkle=()=>{if(!this.isEnabled)return;this.performanceMonitor.update();const t=this.performanceMonitor.shouldReduceQuality()?5e3:3e3,n=Math.floor(e.length*(this.performanceMonitor.shouldReduceQuality()?.02:.05));for(let e=0;e<n;e++){const e=this.iconPool[Math.floor(Math.random()*this.iconPool.length)],t=this.generateSmartOpacity();e.style.opacity=t}this.twinkleInterval=setTimeout(performanceTwinkle,t)};performanceTwinkle()}generateSmartOpacity(){const e=Math.random();return e<.1?.1+.2*Math.random():e<.3?.8+.2*Math.random():.3+.5*Math.random()}addMouseInteraction(){if(!this.starfieldContainer)return;let e=0,t=0,n=0;document.addEventListener("mousemove",i=>{e=i.clientX,t=i.clientY;const r=performance.now();if(r-n<200)return;n=r;this.starfieldContainer.querySelectorAll(".starfield-icon-wrapper").forEach(n=>{const i=n.getBoundingClientRect(),r=i.left+i.width/2,a=i.top+i.height/2,s=Math.sqrt(Math.pow(e-r,2)+Math.pow(t-a,2));if(s<100){const e=1-s/100,t=.8+.2*e;n.querySelector(".starfield-icon").style.filter=`grayscale(${70-20*e}%) brightness(${t})`}})})}addScrollBasedAnimation(){let e=window.scrollY;const scrollHandler=()=>{const t=window.scrollY;if(this.starfieldContainer&&Math.abs(t-e)>5){const n=.05*(t-e);this.starfieldContainer.style.transform=`translateY(${n}px)`,e=t}};let t;window.addEventListener("scroll",()=>{t||(t=setTimeout(()=>{scrollHandler(),t=null},32))},{passive:!0})}addDynamicColorTransitions(){if(!this.starfieldContainer)return;this.starfieldContainer.querySelectorAll(".tech-icon").forEach(e=>{e.style.transition="filter 0.3s ease, opacity 0.2s ease",e.addEventListener("mouseenter",()=>{this.performanceMonitor.fps>30&&(e.style.filter="brightness(1.2) saturate(1.1)")}),e.addEventListener("mouseleave",()=>{e.style.filter=""})})}getPerformanceMetrics(){return{fps:this.performanceMonitor.fps,isLowPerformance:this.performanceMonitor.isLowPerformance,iconCount:this.totalIcons,adaptiveQuality:this.adaptiveQuality}}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.colorAnimationFrame&&cancelAnimationFrame(this.colorAnimationFrame),this.twinkleInterval&&clearTimeout(this.twinkleInterval),this.starfieldContainer&&this.starfieldContainer.remove(),this.iconPool=[],this.performanceMonitor=null,this.colorAnimationFrame=null}}class BrowserCompatibilityDetector{constructor(){this.features=this.detectFeatures(),this.browser=this.detectBrowser(),this.performance=this.detectPerformance()}detectFeatures(){return{webgl:this.checkWebGL(),webgl2:this.checkWebGL2(),requestAnimationFrame:!!window.requestAnimationFrame,intersectionObserver:!!window.IntersectionObserver,visibilityAPI:void 0!==document.hidden,classList:!!document.createElement("div").classList,addEventListener:!!window.addEventListener,localStorage:this.checkLocalStorage(),sessionStorage:this.checkSessionStorage(),touchEvents:"ontouchstart"in window,cssTransforms:this.checkCSSTransforms(),cssFilters:this.checkCSSFilters(),cssBlendModes:this.checkCSSBlendModes(),cssGridSupport:this.checkCSSGrid(),es6Support:this.checkES6Support()}}checkWebGL(){try{const e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}checkWebGL2(){try{const e=document.createElement("canvas");return!!e.getContext("webgl2")}catch(e){return!1}}checkLocalStorage(){try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}checkSessionStorage(){try{const e="__sessionStorage_test__";return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}}checkCSSTransforms(){const e=document.createElement("div");return["transform","webkitTransform","mozTransform","msTransform"].some(t=>void 0!==e.style[t])}checkCSSFilters(){const e=document.createElement("div");return["filter","webkitFilter","mozFilter","msFilter"].some(t=>void 0!==e.style[t])}checkCSSBlendModes(){return void 0!==document.createElement("div").style.mixBlendMode}checkCSSGrid(){return void 0!==document.createElement("div").style.display&&CSS.supports("display","grid")}checkES6Support(){try{return"undefined"!=typeof Symbol&&"undefined"!=typeof Promise}catch(e){return!1}}detectBrowser(){const e=navigator.userAgent,t={chrome:/Chrome/.test(e)&&/Google Inc/.test(navigator.vendor),firefox:/Firefox/.test(e),safari:/Safari/.test(e)&&/Apple Computer/.test(navigator.vendor),edge:/Edg/.test(e),ie:/MSIE|Trident/.test(e),opera:/OPR/.test(e)||/Opera/.test(e),mobile:/Mobi|Android/i.test(e)};return Object.keys(t).find(e=>t[e])||"unknown"}detectPerformance(){const e=navigator.hardwareConcurrency||2,t=navigator.deviceMemory||4;return{cores:e,memory:t,connectionType:this.getConnectionType(),level:this.getPerformanceLevel(e,t)}}getConnectionType(){return navigator.connection&&navigator.connection.effectiveType||"unknown"}getPerformanceLevel(e,t){return e>=8&&t>=8?"high":e>=4&&t>=4?"medium":"low"}}class WebGLParticleSystem{constructor(e){this.canvas=e,this.compatibilityDetector=new BrowserCompatibilityDetector,this.gl=null,this.isWebGLSupported=!1,this.particles=[],this.particleCount=100,this.animationId=null,this.fallbackMode=!1,this.initWithFallback()}initWithFallback(){if(this.compatibilityDetector.features.webgl)try{if(this.gl=this.canvas.getContext("webgl2")||this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.isWebGLSupported=!!this.gl,this.isWebGLSupported)return void this.init()}catch(e){console.warn("WebGL initialization failed, falling back to Canvas 2D:",e)}this.fallbackMode=!0,this.initCanvasFallback()}initCanvasFallback(){this.ctx=this.canvas.getContext("2d"),this.ctx?(this.particleCount=Math.min(50,this.particleCount),this.initParticles(),this.renderCanvasFallback()):console.warn("Canvas 2D not supported, disabling particle system")}init(){if(this.isWebGLSupported)try{this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.initParticles(),this.createShaders(),this.render()}catch(e){console.warn("WebGL setup failed, switching to Canvas fallback:",e),this.fallbackMode=!0,this.initCanvasFallback()}}renderCanvasFallback(){if(!this.ctx)return;const animate=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.x<0&&(e.x=this.canvas.width),e.x>this.canvas.width&&(e.x=0),e.y<0&&(e.y=this.canvas.height),e.y>this.canvas.height&&(e.y=0),e.opacity=.3+.2*Math.sin(.001*Date.now()+.01*e.x),this.ctx.save(),this.ctx.globalAlpha=e.opacity,this.ctx.fillStyle=`rgb(${Math.floor(255*e.color[0])}, ${Math.floor(255*e.color[1])}, ${Math.floor(255*e.color[2])})`,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.size,0,2*Math.PI),this.ctx.fill(),this.ctx.restore()}),this.animationId=requestAnimationFrame(animate)};animate()}initParticles(){for(let e=0;e<this.particleCount;e++)this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:.5*(Math.random()-.5),vy:.5*(Math.random()-.5),opacity:.8*Math.random()+.2,size:3*Math.random()+1,color:[Math.random(),Math.random(),Math.random()],life:1})}createShaders(){this.program=this.createProgram("\n      attribute vec2 position;\n      attribute float size;\n      attribute float opacity;\n      attribute vec3 color;\n\n      varying float vOpacity;\n      varying vec3 vColor;\n\n      void main() {\n        gl_Position = vec4(position, 0.0, 1.0);\n        gl_PointSize = size;\n        vOpacity = opacity;\n        vColor = color;\n      }\n    ","\n      precision mediump float;\n\n      varying float vOpacity;\n      varying vec3 vColor;\n\n      void main() {\n        float dist = distance(gl_PointCoord, vec2(0.5));\n        if (dist > 0.5) discard;\n\n        float alpha = (1.0 - dist * 2.0) * vOpacity;\n        gl_FragColor = vec4(vColor, alpha);\n      }\n    ")}createProgram(e,t){const n=this.gl.createProgram(),i=this.createShader(this.gl.VERTEX_SHADER,e),r=this.createShader(this.gl.FRAGMENT_SHADER,t);return this.gl.attachShader(n,i),this.gl.attachShader(n,r),this.gl.linkProgram(n),n}createShader(e,t){const n=this.gl.createShader(e);return this.gl.shaderSource(n,t),this.gl.compileShader(n),n}render(){this.isWebGLSupported&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.updateParticles(),this.renderParticles(),this.animationId=requestAnimationFrame(()=>this.render()))}updateParticles(){this.particles.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.x<0&&(e.x=this.canvas.width),e.x>this.canvas.width&&(e.x=0),e.y<0&&(e.y=this.canvas.height),e.y>this.canvas.height&&(e.y=0),e.opacity=.3+.2*Math.sin(.001*Date.now()+.01*e.x)})}renderParticles(){const e=[],t=[],n=[],i=[];this.particles.forEach(r=>{e.push(r.x/this.canvas.width*2-1,-(r.y/this.canvas.height*2-1)),t.push(r.size),n.push(r.opacity),i.push(...r.color)}),this.gl.drawArrays(this.gl.POINTS,0,this.particleCount)}destroy(){this.animationId&&cancelAnimationFrame(this.animationId)}}class AdvancedCursorTrail{constructor(){this.trail=[],this.maxTrailLength=20,this.colors=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#f0932b"],this.currentColorIndex=0,this.isActive=!0,this.init()}init(){document.addEventListener("mousemove",e=>this.addTrailPoint(e)),this.animate()}addTrailPoint(e){if(!this.isActive)return;const t={x:e.clientX,y:e.clientY,timestamp:Date.now(),color:this.colors[this.currentColorIndex],size:8};this.trail.push(t),this.trail.length>this.maxTrailLength&&this.trail.shift(),this.currentColorIndex=(this.currentColorIndex+1)%this.colors.length}animate(){const e=Date.now();this.trail=this.trail.filter(t=>e-t.timestamp<1e3),this.trail.forEach((t,n)=>{const i=(e-t.timestamp)/1e3,r=Math.max(0,1-i),a=Math.max(.1,1-.8*i);let s=document.querySelector(`[data-trail-id="${n}"]`);s||(s=document.createElement("div"),s.className="cursor-trail-point",s.setAttribute("data-trail-id",n),document.body.appendChild(s)),s.style.cssText=`\n        position: fixed;\n        left: ${t.x-t.size/2}px;\n        top: ${t.y-t.size/2}px;\n        width: ${t.size}px;\n        height: ${t.size}px;\n        background: ${t.color};\n        border-radius: 50%;\n        pointer-events: none;\n        z-index: 9999;\n        opacity: ${r};\n        transform: scale(${a});\n        transition: all 0.1s ease-out;\n        box-shadow: 0 0 10px ${t.color}40;\n      `}),requestAnimationFrame(()=>this.animate())}setActive(e){this.isActive=e,e||(document.querySelectorAll(".cursor-trail-point").forEach(e=>e.remove()),this.trail=[])}}class MagneticFieldController{constructor(){this.magneticElements=[],this.strength=50,this.maxDistance=150,this.isActive=!0,this.init()}init(){this.magneticElements=Array.from(document.querySelectorAll(".project-card, .skill-item, .social-link, .starfield-icon")),document.addEventListener("mousemove",e=>this.updateMagneticField(e))}updateMagneticField(e){this.isActive&&this.magneticElements.forEach(t=>{const n=t.getBoundingClientRect(),i=n.left+n.width/2,r=n.top+n.height/2,a=e.clientX-i,s=e.clientY-r,o=Math.sqrt(a*a+s*s);if(o<this.maxDistance){const e=(this.maxDistance-o)/this.maxDistance,n=a/o*e*this.strength,i=s/o*e*this.strength;t.style.transform=`translate(${.3*n}px, ${.3*i}px) scale(${1+.1*e})`,t.style.transition="transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",t.style.boxShadow=`0 0 ${20*e}px rgba(255, 255, 255, ${.2*e})`}else t.style.transform="",t.style.boxShadow=""})}setActive(e){this.isActive=e,e||this.magneticElements.forEach(e=>{e.style.transform="",e.style.boxShadow=""})}}class EnhancedScrollAnimations{constructor(){this.observedElements=new Map,this.scrollPosition=0,this.isScrolling=!1,this.scrollDirection="down"}init(){this.setupScrollObserver(),this.setupSectionAnimations(),this.setupParallaxElements(),this.setupScrollIndicator()}setupScrollObserver(){this.observer=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,n=e.intersectionRatio;n>.1?this.animateElementIn(t,n):this.animateElementOut(t)})},{threshold:[0,.1,.25,.5,.75,1],rootMargin:"20px"}),document.querySelectorAll("section, .hero, .skill-item, .project-card").forEach(e=>{this.observer.observe(e)})}animateElementIn(e,t){e.classList.contains("hero")?(e.style.transform=`translateY(${30*(1-t)}px)`,e.style.opacity=t):e.classList.contains("skill-item")?(e.style.transform=`translateY(${20*(1-t)}px) scale(${.9+.1*t})`,e.style.opacity=t):e.classList.contains("project-card")?(e.style.transform=`translateY(${25*(1-t)}px)`,e.style.opacity=t,e.style.boxShadow=`0 ${20*t}px ${40*t}px rgba(0,0,0,${.1*t})`):(e.style.transform=`translateY(${20*(1-t)}px)`,e.style.opacity=Math.max(.3,t))}animateElementOut(e){e.style.transform="",e.style.opacity="",e.style.boxShadow=""}setupSectionAnimations(){let e=0;window.addEventListener("scroll",()=>{const t=window.scrollY;this.scrollDirection=t>e?"down":"up",e=t,this.updateParallaxElements(t)},{passive:!0})}setupParallaxElements(){const e=document.querySelector(".hero");e&&(e.classList.add("parallax-element"),e.dataset.parallaxSpeed="0.5")}updateParallaxElements(e){document.querySelectorAll(".parallax-element").forEach(t=>{const n=parseFloat(t.dataset.parallaxSpeed)||.5,i=-e*n;t.style.transform=`translateY(${i}px)`})}setupScrollIndicator(){const e=document.createElement("div");e.className="scroll-progress-indicator",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 0%;\n      height: 3px;\n      background: linear-gradient(90deg, var(--accent-color), var(--accent-bright));\n      z-index: 9999;\n      transition: width 0.1s ease;\n    ",document.body.appendChild(e),window.addEventListener("scroll",()=>{const t=window.scrollY/(document.body.scrollHeight-window.innerHeight)*100;e.style.width=t+"%"},{passive:!0})}}class EnhancedHoverEffects{constructor(){this.activeElements=new Set}init(){this.setupSkillHovers(),this.setupProjectHovers(),this.setupButtonHovers(),this.setupLinkHovers()}setupSkillHovers(){document.querySelectorAll(".skill-item").forEach(e=>{e.addEventListener("mouseenter",e=>{e.target.style.transform="translateY(-8px) scale(1.05)",e.target.style.boxShadow="0 15px 35px rgba(var(--accent-color), 0.2)",e.target.style.zIndex="10",e.target.style.filter="brightness(1.1)"}),e.addEventListener("mouseleave",e=>{e.target.style.transform="",e.target.style.boxShadow="",e.target.style.zIndex="",e.target.style.filter=""})})}setupProjectHovers(){document.querySelectorAll(".project-card").forEach(e=>{e.addEventListener("mouseenter",e=>{e.target.style.transform="translateY(-12px) rotateX(5deg)",e.target.style.boxShadow="0 25px 50px rgba(0,0,0,0.15)";e.target.querySelectorAll(".project-metric").forEach((e,t)=>{setTimeout(()=>{e.style.transform="scale(1.1)",e.style.color="var(--accent-bright)"},100*t)})}),e.addEventListener("mouseleave",e=>{e.target.style.transform="",e.target.style.boxShadow="";e.target.querySelectorAll(".project-metric").forEach(e=>{e.style.transform="",e.style.color=""})})})}setupButtonHovers(){document.querySelectorAll("button, .btn, .hero-cta").forEach(e=>{e.addEventListener("mouseenter",e=>{e.target.style.transform="translateY(-3px) scale(1.02)",e.target.style.boxShadow="0 10px 25px rgba(var(--accent-color), 0.3)"}),e.addEventListener("mouseleave",e=>{e.target.style.transform="",e.target.style.boxShadow=""})})}setupLinkHovers(){document.querySelectorAll("a:not(.hero-cta):not(.btn)").forEach(e=>{e.addEventListener("mouseenter",e=>{e.target.style.textShadow="0 0 8px var(--accent-color)"}),e.addEventListener("mouseleave",e=>{e.target.style.textShadow=""})})}}class LoadingAnimations{constructor(){this.loadedElements=new Set}init(){this.setupElementStaggering(),this.setupImageLoadAnimations(),this.setupFormAnimations()}setupElementStaggering(){document.querySelectorAll(".hero-story-intro, .hero-title, .hero-metrics, .hero-description, .hero-actions").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout(()=>{e.style.transition="all 0.8s cubic-bezier(0.22, 1, 0.36, 1)",e.style.opacity="1",e.style.transform="translateY(0)"},200*t)});document.querySelectorAll(".skill-item").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(20px) scale(0.9)",setTimeout(()=>{e.style.transition="all 0.6s cubic-bezier(0.22, 1, 0.36, 1)",e.style.opacity="1",e.style.transform="translateY(0) scale(1)"},500+100*t)})}setupImageLoadAnimations(){document.querySelectorAll("img").forEach(e=>{e.style.opacity="0",e.style.transform="scale(0.9)",e.addEventListener("load",()=>{e.style.transition="all 0.5s ease",e.style.opacity="1",e.style.transform="scale(1)"})})}setupFormAnimations(){document.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("focus",e=>{e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 20px rgba(var(--accent-color), 0.2)"}),e.addEventListener("blur",e=>{e.target.style.transform="",e.target.style.boxShadow=""})})}}class AnimationPresetManager{constructor(){this.presets={minimal:{name:"Minimal",starfieldEnabled:!1,cursorTrail:!1,magneticField:!1,particleSystem:!1,transitionDuration:"0.2s"},balanced:{name:"Balanced",starfieldEnabled:!0,cursorTrail:!1,magneticField:!0,particleSystem:!1,transitionDuration:"0.4s"},enhanced:{name:"Enhanced",starfieldEnabled:!0,cursorTrail:!0,magneticField:!0,particleSystem:!1,transitionDuration:"0.6s"},ultimate:{name:"Ultimate",starfieldEnabled:!0,cursorTrail:!0,magneticField:!0,particleSystem:!0,transitionDuration:"0.8s"}},this.currentPreset="balanced",this.controllers={}}init(e){this.controllers=e,this.applyPreset(this.currentPreset),this.createPresetSelector()}createPresetSelector(){const e=document.createElement("div");e.className="animation-preset-selector",e.innerHTML=`\n      <div class="preset-selector-wrapper">\n        <label for="animation-preset">Animation Level:</label>\n        <select id="animation-preset">\n          ${Object.keys(this.presets).map(e=>`<option value="${e}" ${e===this.currentPreset?"selected":""}>${this.presets[e].name}</option>`).join("")}\n        </select>\n      </div>\n    `;(document.querySelector(".settings")||document.body).appendChild(e),e.querySelector("select").addEventListener("change",e=>{this.setPreset(e.target.value)})}setPreset(e){this.presets[e]&&(this.currentPreset=e,this.applyPreset(e),localStorage.setItem("animationPreset",e))}applyPreset(e){const t=this.presets[e];document.documentElement.style.setProperty("--transition-base",t.transitionDuration),this.controllers.starfield&&(this.controllers.starfield.isEnabled=t.starfieldEnabled,t.starfieldEnabled||this.controllers.starfield.destroy()),this.controllers.cursorTrail&&this.controllers.cursorTrail.setActive(t.cursorTrail),this.controllers.magneticField&&this.controllers.magneticField.setActive(t.magneticField),this.controllers.particleSystem&&(t.particleSystem?this.controllers.particleSystem.init():this.controllers.particleSystem.destroy())}getStoredPreset(){return localStorage.getItem("animationPreset")||"balanced"}}class AdvancedAnimationController{constructor(){this.animations=new Map,this.observers=new Map,this.isVisible=!0,this.performanceMode="auto",this.globalPerformanceMonitor=new AdvancedPerformanceMonitor,this.init()}init(){this.setupVisibilityAPI(),this.setupIntersectionObservers(),this.startGlobalPerformanceTracking()}setupVisibilityAPI(){document.addEventListener("visibilitychange",()=>{this.isVisible=!document.hidden,this.animations.forEach((e,t)=>{e.pauseOnHidden&&(this.isVisible?e.resume?.():e.pause?.())})})}setupIntersectionObservers(){const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,n=e.intersectionRatio;if(n>.1&&!t.classList.contains("animated-in")&&(this.triggerElementAnimation(t,"fade-in-up"),t.classList.add("animated-in")),n>0){const n=20*(.5-e.intersectionRatio);t.style.transform=`translateY(${n}px)`}})},{threshold:[0,.1,.25,.5,.75,1],rootMargin:"50px"});document.querySelectorAll("[data-animate], .project-card, .skill-card").forEach(t=>{e.observe(t)})}triggerElementAnimation(e,t){switch(t){case"fade-in-up":e.style.cssText+="\n          opacity: 1;\n          transform: translateY(0);\n          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n        ";break;case"scaleIn":e.style.cssText+="\n          opacity: 1;\n          transform: scale(1);\n          transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);\n        "}}startGlobalPerformanceTracking(){const trackPerformance=()=>{if(this.globalPerformanceMonitor.update(),"auto"===this.performanceMode){const e=this.globalPerformanceMonitor.shouldReduceQuality();this.adjustGlobalAnimationQuality(e)}requestAnimationFrame(trackPerformance)};trackPerformance()}adjustGlobalAnimationQuality(e){const t=document.documentElement;e?(t.style.setProperty("--animation-duration","0.3s"),t.style.setProperty("--animation-easing","ease"),t.classList.add("reduced-motion-override")):(t.style.setProperty("--animation-duration","0.8s"),t.style.setProperty("--animation-easing","cubic-bezier(0.4, 0, 0.2, 1)"),t.classList.remove("reduced-motion-override"))}registerAnimation(e,t){this.animations.set(e,t)}unregisterAnimation(e){const t=this.animations.get(e);t&&t.destroy&&t.destroy(),this.animations.delete(e)}getGlobalMetrics(){return{...this.globalPerformanceMonitor,activeAnimations:this.animations.size,visibilityState:this.isVisible?"visible":"hidden",performanceMode:this.performanceMode}}}class CursorTrailManager{constructor(){this.trail=[],this.maxTrailLength=8,this.isEnabled=!window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.isEnabled&&!window.matchMedia("(pointer: coarse)").matches&&this.init()}init(){this.createTrailElements(),this.bindEvents()}createTrailElements(){for(let e=0;e<this.maxTrailLength;e++){const t=document.createElement("div");t.className="cursor-trail",t.style.cssText=`\n        position: fixed;\n        width: ${12-e}px;\n        height: ${12-e}px;\n        background: var(--tech-emerald);\n        border-radius: 50%;\n        pointer-events: none;\n        z-index: 9999;\n        opacity: ${(this.maxTrailLength-e)/this.maxTrailLength*.6};\n        will-change: transform;\n        transform: translate3d(0, 0, 0);\n        backface-visibility: hidden;\n      `,document.body.appendChild(t),this.trail.push({element:t,x:0,y:0})}}bindEvents(){let e,t,n=0,i=0,r=0,a=0,s=0,o=!1;document.addEventListener("mousemove",l=>{const c=performance.now();if(c-s<8)return;s=c,n=l.clientX,i=l.clientY;const d=n-r,h=i-a,m=Math.sqrt(d*d+h*h);this.mouseVelocity=Math.min(m,50),r=n,a=i,o||(o=!0,updateTrail()),clearTimeout(e),e=setTimeout(()=>{o=!1,t&&(cancelAnimationFrame(t),t=null)},100)},{passive:!0});const updateTrail=()=>{if(o){for(let e=0;e<this.trail.length;e++){const t=this.trail[e],r=0===e?n:this.trail[e-1].x,a=0===e?i:this.trail[e-1].y,s=.2+.3*Math.min(this.mouseVelocity/20,1);t.x+=(r-t.x)*s,t.y+=(a-t.y)*s,t.element.style.transform=`translate(${t.x-6}px, ${t.y-6}px)`}t=requestAnimationFrame(updateTrail)}};this.mouseVelocity=0}}class EnhancedTiltManager{constructor(){this.isEnabled=!window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.isEnabled&&this.init()}init(){document.querySelectorAll("[data-tilt]").forEach(e=>{this.setupDynamicTilt(e)})}setupDynamicTilt(e){e.addEventListener("mousemove",t=>{const n=e.getBoundingClientRect(),i=n.left+n.width/2,r=n.top+n.height/2,a=(t.clientX-i)/(n.width/2),s=-8*((t.clientY-r)/(n.height/2)),o=8*a;e.style.transform=`\n        perspective(1000px)\n        rotateX(${s}deg)\n        rotateY(${o}deg)\n        translateY(-5px)\n      `,e.style.transition="transform 0.1s ease-out"}),e.addEventListener("mouseleave",()=>{e.style.transform="",e.style.transition="transform 0.3s ease-out"}),e.addEventListener("focus",()=>{e.style.transform="perspective(1000px) translateY(-3px)"}),e.addEventListener("blur",()=>{e.style.transform=""})}}class MemoryLeakPrevention{constructor(){this.timers=new Set,this.eventListeners=new Set,this.animationFrames=new Set,this.observers=new Set,this.startCleanupMonitoring()}safeSetTimeout(e,t,...n){const i=setTimeout(()=>{this.timers.delete(i),e.apply(this,n)},t);return this.timers.add(i),i}safeSetInterval(e,t,...n){const i=setInterval(e.bind(this,...n),t);return this.timers.add(i),i}safeRequestAnimationFrame(e){const t=requestAnimationFrame(()=>{this.animationFrames.delete(t),e()});return this.animationFrames.add(t),t}safeAddEventListener(e,t,n,i={}){e.addEventListener(t,n,i);const r={element:e,event:t,callback:n,options:i};return this.eventListeners.add(r),r}safeObserve(e,t,n={}){return e.observe(t,n),this.observers.add({observer:e,element:t}),{observer:e,element:t}}cleanup(){this.timers.forEach(e=>clearTimeout(e)),this.timers.clear(),this.timers.forEach(e=>clearInterval(e)),this.timers.clear(),this.animationFrames.forEach(e=>cancelAnimationFrame(e)),this.animationFrames.clear(),this.eventListeners.forEach(({element:e,event:t,callback:n,options:i})=>{e.removeEventListener(t,n,i)}),this.eventListeners.clear(),this.observers.forEach(({observer:e})=>{e.disconnect()}),this.observers.clear()}startCleanupMonitoring(){this.safeSetInterval(()=>{this.checkMemoryUsage()},3e5),window.addEventListener("beforeunload",()=>{this.cleanup()}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.cleanup()})}checkMemoryUsage(){if("memory"in performance){const e=performance.memory,t=Math.round(e.usedJSHeapSize/1048576),n=Math.round(e.jsHeapSizeLimit/1048576);"gc"in window&&window.gc(),t>.8*n&&(console.warn("High memory usage detected - potential memory leak"),this.forceCleanup())}}forceCleanup(){document.querySelectorAll("[data-temp], .temp-element").forEach(e=>e.remove());try{Object.keys(localStorage).forEach(e=>{(e.startsWith("temp_")||e.startsWith("debug_"))&&localStorage.removeItem(e)})}catch(e){}}}class MobileMenuManager{constructor(){this.mobileToggle=document.querySelector(".mobile-menu-toggle"),this.navMenu=document.querySelector(".nav-menu"),this.navLinks=document.querySelectorAll(".nav-link"),this.themeToggle=document.querySelector(".theme-toggle"),this.isOpen=!1,this.lastFocusedElement=null,this.memoryCleanup=new MemoryLeakPrevention,this.mobileToggle&&this.navMenu&&this.init()}init(){this.mobileToggle.addEventListener("click",()=>this.toggleMenu()),this.navLinks.forEach(e=>{e.addEventListener("click",()=>this.closeMenu())}),document.addEventListener("click",e=>{this.isOpen&&!e.target.closest(".nav-container")&&this.closeMenu()}),document.addEventListener("keydown",e=>{if(this.isOpen)return"Escape"===e.key?(this.closeMenu(),void this.mobileToggle.focus()):void("Tab"===e.key&&this.handleTabKey(e))}),window.addEventListener("resize",()=>{window.innerWidth>767&&this.isOpen&&this.closeMenu()})}toggleMenu(){this.isOpen?this.closeMenu():this.openMenu()}openMenu(){this.lastFocusedElement=document.activeElement,this.navMenu.classList.add("open"),this.mobileToggle.setAttribute("aria-expanded","true"),this.mobileToggle.querySelector(".menu-icon").textContent="‚úï",this.isOpen=!0,document.body.style.overflow="hidden",setTimeout(()=>{const e=this.navMenu.querySelector(".nav-link");e&&e.focus()},100),"undefined"!=typeof gtag&&gtag("event","mobile_menu_open",{event_category:"navigation",event_label:"mobile_navigation"})}closeMenu(){this.navMenu.classList.remove("open"),this.mobileToggle.setAttribute("aria-expanded","false"),this.mobileToggle.querySelector(".menu-icon").textContent="‚ò∞",this.isOpen=!1,document.body.style.overflow="",this.lastFocusedElement&&(this.lastFocusedElement.focus(),this.lastFocusedElement=null)}handleTabKey(e){const t=this.getFocusableElements(),n=t[0],i=t[t.length-1];e.shiftKey?document.activeElement===n&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),n.focus())}getFocusableElements(){return[".mobile-menu-toggle",".theme-toggle",".nav-link"].map(e=>[...document.querySelectorAll(e)]).flat().filter(e=>null!==e.offsetParent&&!e.disabled&&-1!==e.tabIndex)}}class MapManager{constructor(){this.mapElement=document.querySelector(".location-map"),this.mapElement&&(this.placeholderSrc=this.mapElement.getAttribute("data-placeholder-src")||"assets/chicago-map.svg",this.apiKey=void 0!==window.CONFIG&&window.CONFIG.GOOGLE_MAPS_API_KEY?window.CONFIG.GOOGLE_MAPS_API_KEY:null,this.apiKey?(this.attachErrorHandler(),this.loadStaticMap()):this.showPlaceholder("missing_api_key"))}attachErrorHandler(){this.boundErrorHandler=this.handleMapError.bind(this),this.mapElement.addEventListener("error",this.boundErrorHandler,{once:!0})}loadStaticMap(){const e={center:"Chicago,IL",zoom:11,size:"300x200",maptype:"roadmap",markers:"color:green|label:D|Chicago,IL",key:this.apiKey},t="https://maps.googleapis.com/maps/api/staticmap?"+Object.entries(e).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&");this.mapElement.classList.remove("map-placeholder"),this.mapElement.alt="Google Maps static map of Chicago, Illinois",this.mapElement.src=t}handleMapError(){this.showPlaceholder("load_error"),"undefined"!=typeof gtag&&gtag("event","map_error",{event_category:"error",event_label:"google_maps_static"})}showPlaceholder(e="missing_api_key"){this.mapElement.classList.add("map-placeholder"),this.mapElement.alt="Stylized map illustration of Chicago, Illinois",this.mapElement.src=this.placeholderSrc,"missing_api_key"===e&&"undefined"!=typeof gtag&&gtag("event","map_api_key_missing",{event_category:"info",event_label:"google_maps_no_key"})}}function debounce(e,t){let n;return function(...i){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...i)},t)}}function throttle(e,t){let n;return function(){const i=arguments,r=this;n||(e.apply(r,i),n=!0,setTimeout(()=>n=!1,t))}}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}if(document.addEventListener("DOMContentLoaded",()=>{try{document.body.classList.remove("no-js"),new ThemeManager,new MobileMenuManager,new SmoothNavigation,new FormValidator(".contact-form"),new AnimationController,new EmbedManager,new PerformanceMonitor,new AccessibilityManager,new ErrorHandler,new MapManager;const e=new BrowserCompatibilityDetector,t=new AdvancedAnimationController,n=new StarfieldManager;n.enableRainbowMode=!1,"low"!==e.performance.level&&"ie"!==e.browser||(n.totalIcons=Math.min(100,n.totalIcons)),t.registerAnimation("starfield",n);let i=null;if(e.features.webgl||e.features.requestAnimationFrame){const e=document.createElement("canvas");e.width=window.innerWidth,e.height=window.innerHeight,e.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: -2;\n        opacity: 0.3;\n      ",document.body.appendChild(e),i=new WebGLParticleSystem(e)}let r=null;!e.features.touchEvents&&e.features.addEventListener&&(r=new AdvancedCursorTrail);const a=new MagneticFieldController;(e.features.touchEvents||"low"===e.performance.level)&&(a.strength=25,a.maxDistance=100);(new EnhancedScrollAnimations).init();(new EnhancedHoverEffects).init();(new LoadingAnimations).init();const s=new AnimationPresetManager,o={starfield:n,cursorTrail:r,magneticField:a,particleSystem:i};let l="balanced";"low"===e.performance.level||"ie"===e.browser?l="minimal":"high"!==e.performance.level||e.features.touchEvents||(l="enhanced"),s.currentPreset=l,s.init(o),t.registerAnimation("starfield",n),t.registerAnimation("particles",i),t.registerAnimation("cursorTrail",r),t.registerAnimation("magneticField",a);const c=new CursorTrailManager,d=new EnhancedTiltManager;t.registerAnimation("legacyCursorTrail",c),t.registerAnimation("tiltEffects",d),document.addEventListener("keydown",e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"r":e.preventDefault(),n.toggleRainbowMode();break;case"t":e.preventDefault(),r.setActive(!r.isActive);break;case"m":e.preventDefault(),a.setActive(!a.isActive)}}),window.getAnimationMetrics=()=>({starfield:n.getPerformanceMetrics(),global:t.getGlobalMetrics(),systems:{webglSupported:i.isWebGLSupported,activeAnimations:t.animations.size,currentPreset:s.currentPreset}}),window.animationControls={toggleRainbow:()=>n.toggleRainbowMode(),toggleCursorTrail:()=>r.setActive(!r.isActive),toggleMagnetic:()=>a.setActive(!a.isActive),setPreset:e=>s.setPreset(e),getPresets:()=>Object.keys(s.presets)},"undefined"!=typeof gtag&&gtag("event","page_view",{event_category:"engagement",event_label:"home_page"})}catch(e){console.error("Error initializing portfolio website:",e)}}),window.addEventListener("scroll",throttle(()=>{const e=document.querySelector(".header");window.scrollY>24?e.classList.add("scrolled"):e.classList.remove("scrolled")},100)),window.matchMedia("(prefers-reduced-motion: reduce)").matches){const e=document.createElement("style");e.textContent="\n    *, *::before, *::after {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n    }\n\n    /* Keep essential hover transitions but reduce them */\n    .project-card[data-tilt]:hover,\n    .skill-card:hover,\n    .hero-cta:hover,\n    .contact-link-item:hover {\n      transition-duration: 0.1ms !important;\n      transform: none !important;\n    }\n\n    /* Disable cursor trail and advanced micro-interactions */\n    .cursor-trail {\n      display: none !important;\n    }\n  ",document.head.appendChild(e)}class ChatSystemManager{constructor(){this.init()}init(){const e=document.getElementById("start-chat"),t=document.getElementById("chat-input");e&&t&&e.addEventListener("click",()=>{this.enableChat(t,e)})}enableChat(e,t){e.disabled=!1,e.focus();const n=t.querySelector("span");n&&(n.textContent="Send Message"),t.type="submit",e.classList.add("chat-enabled"),t.classList.add("chat-active")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new ChatSystemManager}):new ChatSystemManager,"undefined"!=typeof module&&module.exports&&(module.exports={ThemeManager:ThemeManager,MobileMenuManager:MobileMenuManager,SmoothNavigation:SmoothNavigation,FormValidator:FormValidator,AnimationController:AnimationController,EmbedManager:EmbedManager,PerformanceMonitor:PerformanceMonitor,AccessibilityManager:AccessibilityManager,ErrorHandler:ErrorHandler,ChatSystemManager:ChatSystemManager,debounce:debounce,throttle:throttle,isInViewport:isInViewport});