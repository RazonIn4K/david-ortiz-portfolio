class LazyLoader{constructor(){this.loadedModules=new Set,this.pendingModules=new Map,this.isInitialized=!1,this.performanceThresholds={lowEnd:2048,mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.startLazyLoading()):this.startLazyLoading()}startLazyLoading(){requestIdleCallback(()=>{this.loadCriticalAnimations()},{timeout:2e3}),setTimeout(()=>{this.loadHeavyAnimations()},1e3),setTimeout(()=>{this.loadNonEssentialFeatures()},3e3)}async loadCriticalAnimations(){await this.loadModule("hoverEffects",()=>{this.initializeHoverEffects()}),await this.loadModule("smoothScrolling",()=>{this.initializeSmoothScrolling()})}async loadHeavyAnimations(){(navigator.deviceMemory||4)<this.performanceThresholds.lowEnd/1024||this.performanceThresholds.mobile||(await this.loadModule("starfield",()=>{window.StarfieldBackground&&window.StarfieldBackground.init()}),await this.loadModule("particles",()=>{window.ParticleSystem&&window.ParticleSystem.init()}),this.performanceThresholds.mobile||await this.loadModule("cursorTrails",()=>{window.CursorTrails&&window.CursorTrails.init()}))}async loadNonEssentialFeatures(){await this.loadModule("analytics",()=>{window.AnalyticsTracker&&(window.analyticsTracker=new window.AnalyticsTracker({debug:!1,endpoint:"/api/analytics"}))}),await this.loadModule("progressiveEnhancement",()=>{window.ProgressiveEnhancement&&window.ProgressiveEnhancement.init()})}async loadModule(e,i){if(this.loadedModules.has(e))return Promise.resolve();if(this.pendingModules.has(e))return this.pendingModules.get(e);const t=new Promise(t=>{requestIdleCallback(()=>{try{i(),this.loadedModules.add(e),t()}catch(i){console.error(`❌ Failed to load module ${e}:`,i),t()}})});return this.pendingModules.set(e,t),t}initializeHoverEffects(){document.querySelectorAll(".skill-card, .project-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-2px)",e.style.transition="transform 0.2s ease"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})})}initializeSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();const t=document.querySelector(e.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})}getPerformanceMetrics(){return{loadedModules:Array.from(this.loadedModules),deviceMemory:navigator.deviceMemory||"unknown",isMobile:this.performanceThresholds.mobile,connectionType:navigator.connection?.effectiveType||"unknown"}}}const lazyLoader=new LazyLoader;window.LazyLoader=lazyLoader;