const e=window.requestIdleCallback||function(e,i={}){const t=i.timeout||0,o=performance.now();return setTimeout(()=>{e({didTimeout:t>0&&performance.now()-o>=t,timeRemaining:()=>Math.max(0,50-(performance.now()-o))})},1)};window.cancelIdleCallback||clearTimeout;const i=new class{constructor(){this.loadedModules=new Set,this.pendingModules=new Map,this.isInitialized=!1,this.performanceThresholds={lowEnd:2048,mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.startLazyLoading()):this.startLazyLoading()}startLazyLoading(){e(()=>{this.loadCriticalAnimations()},{timeout:2e3}),setTimeout(()=>{this.loadHeavyAnimations()},1e3),setTimeout(()=>{this.loadNonEssentialFeatures()},3e3)}async loadCriticalAnimations(){await this.loadModule("hoverEffects",()=>{this.initializeHoverEffects()}),await this.loadModule("smoothScrolling",()=>{this.initializeSmoothScrolling()})}async loadHeavyAnimations(){(navigator.deviceMemory||4)<this.performanceThresholds.lowEnd/1024||this.performanceThresholds.mobile||(await this.loadModule("starfield",()=>{window.StarfieldBackground&&window.StarfieldBackground.init()}),await this.loadModule("particles",()=>{window.ParticleSystem&&window.ParticleSystem.init()}),this.performanceThresholds.mobile||await this.loadModule("cursorTrails",()=>{window.CursorTrails&&window.CursorTrails.init()}))}async loadNonEssentialFeatures(){await this.loadModule("analytics",()=>{window.AnalyticsTracker&&(window.analyticsTracker=new window.AnalyticsTracker({debug:!1,endpoint:"/api/analytics"}))}),await this.loadModule("progressiveEnhancement",()=>{window.ProgressiveEnhancement&&window.ProgressiveEnhancement.init()})}async loadModule(i,t){if(this.loadedModules.has(i))return Promise.resolve();if(this.pendingModules.has(i))return this.pendingModules.get(i);const o=new Promise(o=>{e(()=>{try{t(),this.loadedModules.add(i),o()}catch(e){o()}})});return this.pendingModules.set(i,o),o}initializeHoverEffects(){document.querySelectorAll(".skill-card, .project-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-2px)",e.style.transition="transform 0.2s ease"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})})}initializeSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();const t=document.querySelector(e.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})}getPerformanceMetrics(){return{loadedModules:Array.from(this.loadedModules),deviceMemory:navigator.deviceMemory||"unknown",isMobile:this.performanceThresholds.mobile,connectionType:navigator.connection?.effectiveType||"unknown"}}};window.LazyLoader=i;