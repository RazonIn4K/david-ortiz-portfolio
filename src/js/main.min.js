!function(){window.performance&&window.performance.mark&&window.performance.mark("main-init-start"),document.documentElement.classList.remove("no-js"),document.body?document.body.classList.remove("no-js"):document.addEventListener("DOMContentLoaded",function(){document.body.classList.remove("no-js")});const e="#contact-form",n=[{label:"ThemeManager",assign:"themeManager",isAvailable:()=>void 0!==window.ThemeManager,init:()=>new window.ThemeManager},{label:"SmoothNavigation",assign:"smoothNav",isAvailable:()=>void 0!==window.SmoothNavigation,init:()=>new window.SmoothNavigation},{label:"AnimationController",assign:"animCtrl",isAvailable:()=>void 0!==window.AnimationController,init:()=>new window.AnimationController},{label:"MobileMenuManager",assign:"mobileMenu",isAvailable:()=>void 0!==window.MobileMenuManager,init:()=>new window.MobileMenuManager},{label:"EmbedManager",assign:"embedMgr",isAvailable:()=>void 0!==window.EmbedManager,init:()=>new window.EmbedManager},{label:"PerformanceMonitor",assign:"perfMon",isAvailable:()=>void 0!==window.PerformanceMonitor,init:()=>new window.PerformanceMonitor},{label:"AccessibilityManager",assign:"a11y",isAvailable:()=>void 0!==window.AccessibilityManager,init:()=>new window.AccessibilityManager},{label:"ErrorHandler",assign:"errors",isAvailable:()=>void 0!==window.ErrorHandler,init:()=>new window.ErrorHandler},{label:"FormValidator",assign:"formValidator",isAvailable:()=>Boolean(document.querySelector(e)&&void 0!==window.FormValidator),init:()=>new window.FormValidator(e)},{label:"EnhancedFormValidator",assign:"enhancedFormValidator",isAvailable:()=>Boolean(document.querySelector(e)&&void 0!==window.EnhancedFormValidator),init:()=>new window.EnhancedFormValidator(e,{useApiSubmission:!0,apiEndpoint:"/api/contact",enableAnalytics:!0})},{label:"LazyLoader",assign:"lazyLoader",isAvailable:()=>void 0!==window.LazyLoader,init:()=>window.LazyLoader},{label:"EnhancedAIChat",assign:"enhancedChat",isAvailable:()=>Boolean(window.CONFIG?.ENABLE_AI_CHAT&&void 0!==window.EnhancedAIChat&&!window.enhancedChat&&!window.chatInstance),init:()=>window.chatInstance?window.chatInstance:window.enhancedChat?window.enhancedChat:new window.EnhancedAIChat({enableAnalytics:!0,debug:window.CONFIG?.DEBUG||!1})}],a=[{matches:e=>matchesShortcut(e,{key:"t",ctrlOrMeta:!0,shift:!0}),handler:()=>{window.themeManager&&(window.themeManager.toggleTheme(),trackShortcutUsage("theme_toggle"))}},{matches:e=>matchesShortcut(e,{key:"k",ctrlOrMeta:!0}),handler:()=>{const n=document.querySelector(`${e} input[type="text"], ${e} input[type="email"]`);n&&(n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"}),trackShortcutUsage("focus_contact"))}}];function matchesShortcut(e,{key:n,ctrlOrMeta:a=!1,shift:t=!1,alt:i=!1}){const o=e.key?.toLowerCase();return function(e,n){return e===n.toLowerCase()}(o,n)&&function(e,n){return n?e.ctrlKey||e.metaKey:!e.ctrlKey&&!e.metaKey}(e,a)&&function(e,n,a){return n===e.shiftKey&&a===e.altKey}(e,t,i)}function trackShortcutUsage(e){window.analytics?.track("keyboard_shortcut",{event_category:"interaction",event_label:e})}function handleVisibilityChange(){const e=document.hidden?"page_hidden":"page_visible",n={event_category:"engagement"};document.hidden&&(n.time_on_page=Math.round(performance.now()/1e3)),window.analytics?.track(e,n)}function handleBeforeUnload(){window.analytics&&window.performance&&function(e){if(!navigator.sendBeacon||!window.analytics.localTracker)return;const n=JSON.stringify({event:"page_unload",params:{event_category:"engagement",time_on_site:e,session_id:window.analytics.getSessionId()}});navigator.sendBeacon("/api/analytics",n)}(Math.round(performance.now()/1e3))}function initialize(){document.addEventListener("click",function(e){const n=e.target?.closest?.("[data-track]");if(!n||!n.dataset.track)return;const a=n.dataset.track,t=function(e){const n={event_category:e.dataset.trackCategory||"engagement",event_label:e.dataset.trackLabel||e.textContent?.trim()||e.id||"unknown"};return Object.keys(e.dataset).forEach(a=>{if(!a.startsWith("track")||["track","trackCategory","trackLabel"].includes(a))return;const t=a.replace("track","").toLowerCase();n[t]=e.dataset[a]}),n}(n);window.analytics?.track(a,t)},!0);const e=function(){const e=[];return n.forEach(n=>{if(n.isAvailable())try{const a=n.init();n.assign&&(window[n.assign]=a),e.push(n.label)}catch(a){window.CONFIG?.DEBUG&&console.error(`Failed to initialize ${n.label}`,a)}}),e}();if(document.addEventListener("keydown",e=>{if(function(e){return Boolean(e.target?.closest?.("input, textarea, select, [contenteditable]"))}(e))return;const n=a.find(n=>n.matches(e));n&&(e.preventDefault(),n.handler(e))}),window.analytics?.pageview(),document.addEventListener("visibilitychange",handleVisibilityChange),window.addEventListener("beforeunload",handleBeforeUnload),"serviceWorker"in navigator&&!window.CONFIG?.IS_GITHUB_PAGES&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{setInterval(()=>{e.update()},36e5)}).catch(e=>{})}),window.performance&&window.performance.mark){window.performance.mark("main-init-end"),window.performance.measure("main-init","main-init-start","main-init-end");const e=window.performance.getEntriesByName("main-init")[0];e&&window.CONFIG?.DEBUG&&console.debug(`Main initialization completed in ${Math.round(e.duration)}ms`)}window.dispatchEvent(new CustomEvent("mainInitialized",{detail:{features:e}}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initialize):initialize()}();