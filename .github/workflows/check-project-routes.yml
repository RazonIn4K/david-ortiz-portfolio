name: Project Route Monitor

on:
  schedule:
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  curl-projects:
    runs-on: ubuntu-latest
    steps:
      - name: Assert project demos respond with 200
        env:
          PROJECT_URLS: |
            https://cs-learning.me/projects/taskflow-pro/
            https://cs-learning.me/projects/bella-cucina/
            https://cs-learning.me/projects/prime-properties/
            https://cs-learning.me/projects/powerfit-studios/
        run: |
          set -euo pipefail
          while read -r url; do
            [ -z "$url" ] && continue
            echo "Checking $url"
            status=$(curl -L -s -o /dev/null -w "%{http_code}" --connect-timeout 10 --max-time 20 "$url")
            if [ "$status" != "200" ]; then
              echo "::error ::$url returned $status"
              exit 1
            fi
          done <<< "$PROJECT_URLS"
          echo "All project routes responded with 200"
